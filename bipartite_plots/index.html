<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Plotting bipartite networks." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Plotting bipartite networks</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/pedroj/bipartite_plots">View on GitHub</a>

          <h1 id="project_title">R code for plotting bipartite networks</h1>
          <h2 id="project_tagline">Our aim here is to get plotting of bipartite networks within the ggplot2 framework.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="http://pedroj.github.io/bipartite_plots/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="http://pedroj.github.io/bipartite_plots/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

<!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>Plotting bipartite networks with energy-minimization algorithms</h3>

		<p>This is a series of <code>R</code> script files aimed to plot bipartite networks. Bipartite networks are a special type of network where nodes are of two distinct types or sets, so that connections (links) only exist among nodes of the different sets.</p>

		<p>As in other types of network, bipartite strucures can be binary (only the presence/absence of the links is mapped) or quantitative (weighted), where the links can have variable importance or weight.</p>

		<p>To plot, we start with an adjacency or incidence matrix. I&#39;m using matrices that illustrate ecological interactions among species, such as the mutualisttic interactions of animal pollinators and plant flowers. The two sets (modes) of these bipartite netwroks are animals (pollinators) ans plants species.</p>

<p>From any adjacency matrix we can get a <code>network</code> object or an <code>igraph</code> object for plotting and analysis. </p>

<hr/>

<h3>Required packages</h3>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/network"><span style="">network</span></a><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/igraph"><span style="">igraph</span></a><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/sna"><span style="">sna</span></a><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/ggplot2"><span style="">ggplot2</span></a><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/sna"><span style="">sna</span></a><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/ergm"><span style="">ergm</span></a><span style="color: #009900;">&#41;</span></pre></div></div>
<p>Here I plot bipartite networks from their adjacency matrices, i.e., the two-mode networks.</p>

<h3>Initializing bipartite webs for library network</h3>
<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Read data matrices.</span>
<span style="color: #666666; font-style: italic;"># Read a network</span>
<span style="color: #666666; font-style: italic;"># Creating the objects. Example input from the clipboard. </span>
<span style="color: #666666; font-style: italic;">#</span>
mymat <span style="">&lt;-</span> <a href="http://inside-r.org/r-doc/utils/read.delim"><span style="color: #003399; font-weight: bold;">read.delim</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;data.txt&quot;</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/row.names"><span style="color: #003399; font-weight: bold;">row.names</span></a>=<span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Where data.txt has a weighted adjacency matrix, e.g.,:</span>
<span style="color: #666666; font-style: italic;">#</span>
	Aa	Ab	Ac	Ba	<a href="http://inside-r.org/packages/cran/BB"><span style="">Bb</span></a>	Bc	Bd	<a href="http://inside-r.org/packages/cran/ca"><span style="">Ca</span></a>	Cb	Cc	Da
P1	<span style="color: #cc66cc;">139</span>	<span style="color: #cc66cc;">112</span>	 <span style="color: #cc66cc;">9</span>	<span style="color: #cc66cc;">73</span>	<span style="color: #cc66cc;">4</span>	<span style="color: #cc66cc;">14</span>	<span style="color: #cc66cc;">20</span>	<span style="color: #cc66cc;">14</span>	<span style="color: #cc66cc;">5</span>	<span style="color: #cc66cc;">2</span>	<span style="color: #cc66cc;">1</span>
P2	<span style="color: #cc66cc;">184</span>	<span style="color: #cc66cc;">26</span>	<span style="color: #cc66cc;">6</span>	<span style="color: #cc66cc;">19</span>	<span style="color: #cc66cc;">31</span>	<span style="color: #cc66cc;">21</span>	<span style="color: #cc66cc;">17</span>	<span style="color: #cc66cc;">11</span>	<span style="color: #cc66cc;">7</span>	<span style="color: #cc66cc;">5</span>	<span style="color: #cc66cc;">0</span>
P3	<span style="color: #cc66cc;">281</span>	<span style="color: #cc66cc;">74</span>	<span style="color: #cc66cc;">33</span>	<span style="color: #cc66cc;">36</span>	<span style="color: #cc66cc;">18</span>	<span style="color: #cc66cc;">29</span>	<span style="color: #cc66cc;">5</span>	<span style="color: #cc66cc;">9</span>	<span style="color: #cc66cc;">5</span>	<span style="color: #cc66cc;">3</span>	<span style="color: #cc66cc;">0</span>
P4	<span style="color: #cc66cc;">87</span>	<span style="color: #cc66cc;">40</span>	<span style="color: #cc66cc;">38</span>	<span style="color: #cc66cc;">21</span>	<span style="color: #cc66cc;">13</span>	<span style="color: #cc66cc;">12</span>	<span style="color: #cc66cc;">9</span>	<span style="color: #cc66cc;">1</span>	<span style="color: #cc66cc;">1</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>
P5	<span style="color: #cc66cc;">100</span>	<span style="color: #cc66cc;">93</span>	<span style="color: #cc66cc;">27</span>	<span style="color: #cc66cc;">12</span>	<span style="color: #cc66cc;">8</span>	<span style="color: #cc66cc;">11</span>	<span style="color: #cc66cc;">32</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>
P6	<span style="color: #cc66cc;">51</span>	<span style="color: #cc66cc;">25</span>	<span style="color: #cc66cc;">13</span>	<span style="color: #cc66cc;">17</span>	<span style="color: #cc66cc;">9</span>	<span style="color: #cc66cc;">1</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>
P7	<span style="color: #cc66cc;">42</span>	<span style="color: #cc66cc;">26</span>	<span style="color: #cc66cc;">16</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">2</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>
P8	<span style="color: #cc66cc;">31</span>	<span style="color: #cc66cc;">18</span>	<span style="color: #cc66cc;">14</span>	<span style="color: #cc66cc;">15</span>	<span style="color: #cc66cc;">12</span>	<span style="color: #cc66cc;">9</span>	<span style="color: #cc66cc;">7</span>	<span style="color: #cc66cc;">1</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>
P9	<span style="color: #cc66cc;">46</span>	<span style="color: #cc66cc;">12</span>	<span style="color: #cc66cc;">6</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">3</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>
P10	<span style="color: #cc66cc;">136</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">12</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">2</span>	<span style="color: #cc66cc;">2</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>
P11	<span style="color: #cc66cc;">130</span>	<span style="color: #cc66cc;">8</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">5</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>	<span style="color: #cc66cc;">0</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Use this to copy from the clipboard, after select/copy the above block.</span>
<span style="color: #666666; font-style: italic;">#</span>
mymat <span style="">&lt;-</span> <a href="http://inside-r.org/r-doc/utils/read.table"><span style="color: #003399; font-weight: bold;">read.table</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/r-doc/base/pipe"><span style="color: #003399; font-weight: bold;">pipe</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;pbpaste&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> header=T<span style="color: #339933;">,</span> sep= <span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\t</span>&quot;</span><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/base/row.names"><span style="color: #003399; font-weight: bold;">row.names</span></a>=<span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span></pre></div></div>

<p>The adjacency matrix is read as tab-separated file with header names, and the first column is taken as the row names. These are two of my datasets of well-sampled plant-frugivore interaction networks from S Spain, read in the usual way.</p>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># The Nava de las Correhuelas dataset.</span>
<span style="color: #666666; font-style: italic;">#</span>
nch <span style="">&lt;-</span> <a href="http://inside-r.org/r-doc/utils/read.table"><span style="color: #003399; font-weight: bold;">read.table</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;./data/NCH_quant_bmatrix.txt&quot;</span><span style="color: #339933;">,</span> 
                  header = T<span style="color: #339933;">,</span> sep = <span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\t</span>&quot;</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/row.names"><span style="color: #003399; font-weight: bold;">row.names</span></a> = <span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> 
                  dec = <span style="color: #0000ff;">&quot;,&quot;</span><span style="color: #339933;">,</span> na.strings = <span style="color: #0000ff;">&quot;NA&quot;</span><span style="color: #009900;">&#41;</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># The Hato Raton dataset.</span>
<span style="color: #666666; font-style: italic;">#</span>
hr <span style="">&lt;-</span> <a href="http://inside-r.org/r-doc/utils/read.table"><span style="color: #003399; font-weight: bold;">read.table</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;./data/HR_quant_bmatrix.txt&quot;</span><span style="color: #339933;">,</span> 
                 header = T<span style="color: #339933;">,</span> sep = <span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\t</span>&quot;</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/row.names"><span style="color: #003399; font-weight: bold;">row.names</span></a> = <span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> 
                 dec = <span style="color: #0000ff;">&quot;.&quot;</span><span style="color: #339933;">,</span> na.strings = <span style="color: #0000ff;">&quot;NA&quot;</span><span style="color: #009900;">&#41;</span></pre></div></div>

<hr/>

<p>Here I use my function <code>bip_init</code> to initialize the bipartite networks.</p>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;./functions/bip_init_network.R&quot;</span><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;./functions/bip_init_igraph.R&quot;</span><span style="color: #009900;">&#41;</span>
nch.net <span style="">&lt;-</span> bip_init_network<span style="color: #009900;">&#40;</span>nch<span style="color: #009900;">&#41;</span>
hr.net <span style="">&lt;-</span> bip_init_network<span style="color: #009900;">&#40;</span>hr<span style="color: #009900;">&#41;</span></pre></div></div>

<h3>Functions to plot network graphs</h3>

<h4>bip_binplot</h4>

<p>Simple function to plot a binary bipartite network in <code>network</code>. Its inputs are the adjacency matrix, to get the dimensions from, and the network object corresponding to the matrix. The object net can be initialized with function <code>bip_init_network.R</code>.</p>

<h4>bip_qtplot</h4>

<p>Function to plot a weighted bipartite network in <code>network</code> object. The input is just the weighted (quantitative) adjacency matrix of a two-mode network. Uses objects of type network.</p>

<h4>bip_gplot</h4>

<p>Function to plot a weighted bipartite network in <code>igraph</code>. Its inputs are the adjacency matrix, to get the dimensions from, and the igraph object corresponding to the matrix.</p>

<h4>bip_ggplot</h4>

<p>This is just a prototype of function. I&#39;m using it as raw code for now. You assign the matrix and network object at the start (see below). 
In addition, my function <code>vectorize</code> is needed in the section using <code>ggplot2</code>. I&#39;m including it herewith just for illustration.</p>

<p>A better implementation is to use F. Briatte&#39;s <code>ggnet</code> function (see example below), which uses my initialization codes and the modifications to get the bipartite networks in <code>ggplot2</code>.</p>


<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Sourcing required functions and initializing the net objects.</span>
<span style="color: #666666; font-style: italic;">#</span>
<a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;./functions/bip_binplot.R&quot;</span><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;./functions/bip_gplot.R&quot;</span><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;./functions/bip_qtplot.R&quot;</span><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;./functions/vectorize.R&quot;</span><span style="color: #009900;">&#41;</span></pre></div></div>

<h3>Using <code>ggplot2</code></h3>

<h4>Draft code for plotting a bipartite network in ggplot2</h4>

<p>The code for <code>ggplot2</code> is in the file <code>bip_ggplot2.R</code>. It is not a function
yet. I&#39;m using the <code>gplot.layout.fruchtermanreingold</code> layout, but just tweak the code to get a Kamada-Kawai, for example. We just source this file after assigning the input adjacency matrix and
the input graph:</p>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/network"><span style="">network</span></a><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/ggplot2"><span style="">ggplot2</span></a><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/sna"><span style="">sna</span></a><span style="color: #009900;">&#41;</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/packages/cran/ergm"><span style="">ergm</span></a><span style="color: #009900;">&#41;</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Assign the matrix and the network objects here.  mymat is a matrix with</span>
<span style="color: #666666; font-style: italic;"># column names and row names.  net is a network object.  This is for the</span>
<span style="color: #666666; font-style: italic;"># Nava de las Correhuelas network.</span>
<span style="color: #666666; font-style: italic;">#</span>
mymat <span style="">&lt;-</span> nch
net <span style="">&lt;-</span> nch.net
<span style="color: #666666; font-style: italic;"># Now we source the bip_ggplot2.R file</span>
<a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;bip_ggplot2.R&quot;</span><span style="color: #009900;">&#41;</span></pre></div></div>
<p>
	<p><img src="images/ggplot_prototype1.png" alt="plot of chunk ggplot_prototype" /></p>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># We repeat for the Hato Raton network.</span>
<span style="color: #666666; font-style: italic;">#</span>
mymat <span style="">&lt;-</span> hr
net <span style="">&lt;-</span> hr.net
<a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;bip_ggplot2.R&quot;</span><span style="color: #009900;">&#41;</span></pre></div></div>

<p><img src="images/ggplot_prototype2.png" alt="plot of chunk ggplot_prototype" /></p>

<h3>Using François Briatte&#39;s <code>ggnet</code> function</h3>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Plotting bipartite networks from adjacency matrix of two-mode network.</span>
<span style="color: #666666; font-style: italic;"># Using ggplot2. Code from Francois Briatte, using his fucntion ggnet.</span>
<span style="color: #666666; font-style: italic;"># DATE: 15Jul2013.</span>
<span style="color: #666666; font-style: italic;">#</span>
<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">&#40;</span>downloader<span style="color: #009900;">&#41;</span></pre></div></div>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">## Loading required package: downloader</span></pre></div></div>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># PJ example. Based on a gist by F Briatte to just feed the network data</span>
<span style="color: #666666; font-style: italic;"># from its adjacency matrix to ggnet</span>
<span style="color: #666666; font-style: italic;">#</span>
link = <span style="color: #0000ff;">&quot;https://raw.github.com/pedroj/bipartite_plots/master/data/NCH_quant_bmatrix.txt&quot;</span>
&nbsp;
<a href="http://inside-r.org/r-doc/base/file"><span style="color: #003399; font-weight: bold;">file</span></a> = <span style="color: #0000ff;">&quot;data/NCH_quant_bmatrix.txt&quot;</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span><span style="">!</span><a href="http://inside-r.org/r-doc/base/file.exists"><span style="color: #003399; font-weight: bold;">file.exists</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/r-doc/base/file"><span style="color: #003399; font-weight: bold;">file</span></a><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> download<span style="color: #009900;">&#40;</span>link<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/file"><span style="color: #003399; font-weight: bold;">file</span></a><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/mode"><span style="color: #003399; font-weight: bold;">mode</span></a> = <span style="color: #0000ff;">&quot;wb&quot;</span><span style="color: #009900;">&#41;</span>
M <span style="">&lt;-</span> <a href="http://inside-r.org/r-doc/utils/read.table"><span style="color: #003399; font-weight: bold;">read.table</span></a><span style="color: #009900;">&#40;</span><a href="http://inside-r.org/r-doc/base/file"><span style="color: #003399; font-weight: bold;">file</span></a><span style="color: #339933;">,</span> sep = <span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\t</span>&quot;</span><span style="color: #339933;">,</span> dec = <span style="color: #0000ff;">&quot;,&quot;</span><span style="color: #339933;">,</span> 
                header = <span style="color: #000000; font-weight: bold;">TRUE</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/row.names"><span style="color: #003399; font-weight: bold;">row.names</span></a> = <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Bipartite network initialization, starting from an adjacency</span>
<span style="color: #666666; font-style: italic;"># matrix.</span>
<span style="color: #666666; font-style: italic;">#</span>
<a href="http://inside-r.org/r-doc/base/source"><span style="color: #003399; font-weight: bold;">source</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;functions/bip_briatte.R&quot;</span><span style="color: #009900;">&#41;</span>
source_url<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;https://raw.github.com/briatte/ggnet/master/ggnet.R&quot;</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/utils/prompt"><span style="color: #003399; font-weight: bold;">prompt</span></a> = <span style="color: #000000; font-weight: bold;">FALSE</span><span style="color: #009900;">&#41;</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Pass the network, edge weights and mode to ggnet.</span>
<span style="color: #666666; font-style: italic;">#</span>
net = bipartite.network<span style="color: #009900;">&#40;</span>M<span style="color: #339933;">,</span> modes = <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Animals&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;Plants&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span>
ggnet<span style="color: #009900;">&#40;</span>net<span style="color: #339933;">,</span> segment.size = edge.weights<span style="color: #009900;">&#40;</span>M<span style="color: #339933;">,</span> <span style="color: #cc66cc;">15</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> 
      segment.alpha = <span style="color: #cc66cc;">0.35</span><span style="color: #339933;">,</span> label = <span style="color: #000000; font-weight: bold;">TRUE</span><span style="color: #339933;">,</span> 
      color = <span style="color: #0000ff;">&quot;black&quot;</span><span style="color: #339933;">,</span> 
      node.group = get.vertex.attribute<span style="color: #009900;">&#40;</span>net<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;mode&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span></pre></div></div>

<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">## Loading required package: grid</span></pre></div></div>
<div style="overflow:auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">## Loading required package: RColorBrewer</span></pre></div></div>

<p><img src="images/ggplot_prototype3.png" alt="plot of chunk ggplot_prototype" /></p>

<h3>Acknowledgements</h3>

<p>This code benifits from comments and <code>R</code>code sharing by François Briatte and Scott Chamberlain.</p>


<p>Best wishes, and happy computing!
-- Pedro</p>

<p><code>Last Updated: Jueves, 16 Julio, 2013 00:35 AM 
On line since 1989. Pedro Jordano
</code></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Bipartite plots maintained by <a href="https://github.com/pedroj">pedroj</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
  </body>
</html>

